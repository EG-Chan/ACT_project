{% extends "main/main.html" %}
{% load static %}

{% block static %}
<link rel="stylesheet" href="{% static 'css/result.css' %}">
{% endblock static %}

{% block content %}
<section>
    <div class="title">
        <h1>{{track_name}} - {{artist_name}}</h1>
    </div>
    <div class="container1">
        <div class="column1">
            <div class="image-result">
                <img src="{{track_img}}">
            </div>
            <h5>{{track_year}}</h5>
            <h1>{{track_name}}</h1>
            <h3>{{artist_name}}</h3>
            <h5>장르 : {{track_genres}}</h5>
            <div class='emb_div'>
                <embed class='imgs_' src="{{track_src}}">
            </div>
        </div>
        <div class="column2">
            {% if state == 0 %}
            <p>노래의 추가 정보를 입력 후 <b>'노래 분석'</b> 을 눌러주세요.</p>
            <form action="{% url 'main:result' id %}" method="post">
                {% csrf_token %}
                
                <div class="item">
                    <div class="row">
                        <p>유형</p>
                    </div>
                    <select name="gender" id="id_gender">
                        <option value="1" selected>남자 솔로</option>
                        <option value="2">여자 솔로</option>
                        <option value="3">남자 그룹</option>
                        <option value="4">여자 그룹</option>
                        <option value="5">혼성 그룹</option>
                        <option value="6">가수 없음</option>
                    </select>
                </div>
                
                <div class="item">
                    <div class="row">
                        <p>메인 악기</p>
                    </div>
                    <select name="re_inst" id="id_re_inst">
                        <option value="0" selected>베이스</option>
                        <option value="1">피아노/기타</option>
                        <option value="2">스트링</option>
                        <option value="3">멜로디 악기/보컬찹</option>
                        <option value="4">신스</option>
                        <option value="5">stab/brass</option>
                        <option value="6">킥/스네어/드럼</option>
                        <option value="7">보컬</option>
                        <option value="8">노래가 아님</option>
                    </select>
                </div>
                <div class="item">
                    <div class="row">
                        <p>베이스 종류 선택<p>
                    </div>
                    <select name="bass_type" id="id_bass_type">
                        <option value="0" selected>일렉/리얼 베이스</option>
                        <option value="1">신스 베이스</option>
                        <option value="2">808 베이스</option>
                        <option value="3">신스 + 808 베이스</option>
                        <option value="4">베이스 없음</option>
                    </select>
                </div>
                <div class="item">
                    <div class="row">
                        <p>리듬 선택<p>
                    </div>
                    <select name="rhythm" id="id_rhythm">
                        <option value="0" selected>뭄바톤/레게</option>
                        <option value="1">마이애미</option>
                        <option value="2">펑크</option>
                        <option value="3">디스코/하우스</option>
                        <option value="4">락</option>
                        <option value="5">컨트리</option>
                        <option value="6">재즈</option>
                        <option value="7">트랩/하프</option>
                        <option value="8">반복되는 주제 리듬</option>
                        <option value="9">4비트/논리듬</option>
                        <option value="10">뽕짝</option>
                        <option value="11">그루비</option>
                        <option value="12">블루스/RNB</option>
                        <option value="13">라틴</option>
                        <option value="14">뉴잭스윙</option>
                        <option value="15">아라비안/인디아</option>
                        <option value="16">오리엔탈</option>
                        <option value="17">셔플/트리플/3비트</option>
                        <option value="18">뉴웨이브</option>
                    </select>
                </div>
                <div class="item">
                    <div class="row">
                        <p>singing 여부</p>
                    </div>
                    <input type="radio" name="main_instr" value="0"><span>only 악기</span> 
                    <input type="radio" name="main_instr" value="1" checked="checked"><span>악기 + 목소리</span> 
                    
                </div>
                <div class="item">
                    <div class="row">
                        <p>영어 여부</p>
                    </div>
                    <input type="radio" name="english" value="0"><span>Non 영어</span> 
                    <input type="radio" name="english" value="1" checked="checked"><span>영어</span> 
                    
                </div>
                <div class="item">
                    <div class="row">
                        <p>레트로 여부</p>
                    </div>
                    <input type="radio" name="retro" value="0" checked="checked"><span>Non 레트로</span> 
                    <input type="radio" name="retro" value="1"><span>레트로</span> 
                </div>

                <div class="item">
                    <div class="row">
                        <p>로파이 여부</p>
                    </div>
                    <input type="radio" name="lofi" value="0" checked="checked"><span>Non 로파이</span> 
                    <input type="radio" name="lofi" value="1"><span>로파이</span> 
                </div>

                <div class="buttonSection">
                    <button class="submit" type="submit">노래 분석</button>
                </div>
                
            </form>
            {% else %}
                <p>스포티파이API와 입력하신 추가 정보로 분석한 결과 : "{{service01_result}}" 으로 판별됩니다.<br></p>
                <p>후렴구 16초 음원을 토대로 분석한 결과 : 틱톡에서 빌보드로 올라갈 확률이 "{{service03_result}}" 으로 계산되었습니다.<br></p>
                <p>위의 최종적인 판별 결과 : 이 노래는 로 예상됩니다.</p>
            {% endif %}
        </div>
    </div>
    <div class="container2">
        <div class="title">
            <h2>이 노래와 유사한 곡</h2>
        </div>
        <div class="inner">
            {% for data in recommendation.tracks %}
            <div class="">
                <div class="image">
                    <a href="{% url 'main:result' data.id %}">
                        <img src="{{data.album.images.1.url}}">
                    </a>
                </div>
                <div class="">
                    <div>
                        <a href="{% url 'main:result' data.id %}">
                            <span id="title">{{ data.album.name }}</span>
                        </a>
                    </div>
                    <div>
                        <span id="artist">{{ data.album.artists.0.name }}</span>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% include "main/search_bar.html" %}
</section>

{% endblock content %}

